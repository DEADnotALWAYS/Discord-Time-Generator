<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discord Timestamp Generator</title>
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <style>
    :root {
      --bg: #1e1e2e;
      --panel: #2a2a40;
      --text: #f2f2f2;
      --accent: #4ea0f0;
      --border: #444;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem 1rem;
      display: flex;
      justify-content: center;
    }
    .app {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 2rem;
      border-radius: 12px;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
    .header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    h1 {
      font-size: 1.4rem;
      color: var(--accent);
      margin: 0;
      white-space: nowrap;
    }
    label {
      display: block;
      margin-bottom: 0.4rem;
      font-weight: bold;
    }
    input,
    select,
    button {
      width: 100%;
      padding: 0.6rem;
      font-size: 1rem;
      background: #3a3a4f;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 6px;
      box-sizing: border-box;
      appearance: none;
    }
    #card-count {
      width: auto;
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
      min-width: 100px;
      margin: 0;
    }
    select {
      background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 0.8rem;
    }
    button {
      margin-top: 1rem;
      background: var(--accent);
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      opacity: 0.9;
    }
    .output {
      font-family: monospace;
      margin-top: 1.5rem;
      background: #222;
      padding: 1rem;
      border-radius: 6px;
    }
    .preview {
      font-style: italic;
      color: #cfc;
      margin-top: 0.5rem;
    }
    .button-container {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .button-container button {
      flex: 1;
      margin-top: 0;
    }
    .tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .tab-btn {
      flex: 1;
      padding: 0.6rem;
      text-align: center;
      background: #3a3a4f;
      border: 1px solid var(--border);
      border-radius: 6px;
      cursor: pointer;
    }
    .tab-btn.active {
      background: var(--accent);
      color: black;
      font-weight: bold;
    }
    .panel {
      display: none;
      margin-top: 1rem;
    }
    .panel.active {
      display: block;
    }
    .row {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .row label {
      flex: 1;
    }
    .timezone-panel {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
      margin-top: 1rem;
      padding-top: 0.5rem;
    }
    .timezone-panel .timezone-card:nth-child(5) {
      grid-column: 1 / -1;
      justify-self: center;
      width: 50%;
    }
    .timezone-card {
      background: #3a3a4f;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem;
      text-align: center;
      position: relative;
      height: 220px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      margin-top: 0.5rem;
    }
    .timezone-card .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      width: 100%;
      position: relative;
    }
    .timezone-card .search-input {
      flex: 1;
      max-width: 250px;
      margin-top: 0;
      padding: 0.3rem;
      font-size: 0.9rem;
      display: none;
      border: 1px solid var(--border);
    }
    .timezone-card .search-input:not(:focus) {
      border-color: #9b9b9b;
    }
    .timezone-card .timezone-options {
      display: none;
      position: absolute;
      top: calc(100% + 2px);
      left: 0;
      right: 0;
      background: #3a3a4f;
      border: 1px solid var(--border);
      border-radius: 6px;
      max-height: 150px;
      overflow-y: auto;
      z-index: 10;
    }
    .timezone-card .timezone-options.show {
      display: block;
    }
    .timezone-card .timezone-option {
      padding: 0.3rem 0.6rem;
      cursor: pointer;
    }
    .timezone-card .timezone-option:hover {
      background: var(--accent);
      color: black;
    }
    .timezone-card .add-btn {
      width: 24px;
      height: 24px;
      line-height: 24px;
      padding: 0;
      font-size: 1.2rem;
      background: transparent;
      border: none;
      color: var(--text);
      transition: transform 0.2s;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    .timezone-card .clear-btn {
      width: 28px;
      height: 28px;
      line-height: 28px;
      margin-top: 0;
      padding: 0;
      font-size: 1.2rem;
      background: transparent;
      border: 1px solid #9b9b9b;
      color: #fff;
      transition: all 0.2s;
      display: none;
      flex-shrink: 0;
      cursor: pointer;
      border-radius: 4px;
    }
    .timezone-card .add-btn:hover {
      transform: translate(-50%, -50%) scale(1.2);
      background: var(--accent);
      color: black;
      border-radius: 4px;
    }
    .timezone-card .clear-btn:hover {
      transform: scale(1.2);
      background: #ff4444;
      color: white;
      border-radius: 4px;
    }
    .timezone-card .time-display {
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
      color: #cfc;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.3rem;
    }
    .timezone-card .time-display .clock {
      width: 80px;
      height: 80px;
    }
    .timezone-card .time-display .clock svg {
      width: 100%;
      height: 100%;
      fill: none;
      stroke: #cfc;
      stroke-width: 2;
    }
    .timezone-card .add-btn-container {
      position: relative;
      height: 100%;
      width: 100%;
    }
    @media (max-width: 600px) {
      .row,
      .timezone-panel {
        grid-template-columns: 1fr;
      }
      .timezone-panel .timezone-card:nth-child(5) {
        width: 100%;
      }
      .header {
        flex-direction: column;
        gap: 0.5rem;
      }
      #card-count {
        width: 100%;
      }
      .button-container {
        flex-direction: column;
        gap: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <h2>Discord Timestamp Generator</h2>
  <div class="app">
    <div class="tabs">
      <div class="tab-btn active" data-tab="native">üì± Native Picker</div>
      <div class="tab-btn" data-tab="custom">üõ† Custom Picker</div>
    </div>
    <div class="panel active" id="native">
      <label for="dt">Choose Date & Time</label>
      <input type="datetime-local" id="dt" />
    </div>
    <div class="panel" id="custom">
      <fieldset style="border:none; padding:0;">
        <legend><strong>üìÖ Date</strong></legend>
        <div class="row">
          <label>Year
            <select id="year"></select>
          </label>
          <label>Month
            <select id="month"></select>
          </label>
          <label>Day
            <select id="day"></select>
          </label>
        </div>
      </fieldset>
      <fieldset style="border:none; padding:0;">
        <legend><strong>‚è∞ Time</strong></legend>
        <div class="row">
          <label>Hour
            <select id="hour"></select>
          </label>
          <label>Minute
            <select id="minute"></select>
          </label>
          <label>AM/PM
            <select id="ampm">
              <option>AM</option>
              <option>PM</option>
            </select>
          </label>
        </div>
      </fieldset>
    </div>
    <label for="format">Display Format</label>
    <select id="format">
      <option value="t">Short Time (t)</option>
      <option value="T">Long Time (T)</option>
      <option value="d">Short Date (d)</option>
      <option value="D">Long Date (D)</option>
      <option value="f">Date + Time (f)</option>
      <option value="F" selected>Full Date (F)</option>
      <option value="R">Relative Time (R)</option>
    </select>
    <div class="output">
      <div><strong>Code:</strong> <span id="code">&lt;t:...&gt;</span></div>
      <div class="preview" id="preview">Preview will appear here</div>
    </div>
    <div class="button-container">
      <button id="generate">Generate Timestamp</button>
      <button id="copy">Copy to Clipboard</button>
    </div>
    <div class="header" id="timezone-header">
      <h1>Timezone Checker</h1>
      <select id="card-count">
        <option value="0">0 Cards</option>
        <option value="1">1 Card</option>
        <option value="2">2 Cards</option>
        <option value="3">3 Cards</option>
        <option value="4">4 Cards</option>
        <option value="5">5 Cards</option>
      </select>
    </div>
    <div class="timezone-panel" id="timezone-panel">
      <div class="timezone-card">
        <div class="controls">
          <input type="text" class="search-input" placeholder="Search timezone..." />
          <div class="timezone-options"></div>
          <button class="clear-btn">√ó</button>
        </div>
        <div class="add-btn-container">
          <button class="add-btn">+</button>
        </div>
        <div class="time-display"></div>
      </div>
      <div class="timezone-card">
        <div class="controls">
          <input type="text" class="search-input" placeholder="Search timezone..." />
          <div class="timezone-options"></div>
          <button class="clear-btn">√ó</button>
        </div>
        <div class="add-btn-container">
          <button class="add-btn">+</button>
        </div>
        <div class="time-display"></div>
      </div>
      <div class="timezone-card">
        <div class="controls">
          <input type="text" class="search-input" placeholder="Search timezone..." />
          <div class="timezone-options"></div>
          <button class="clear-btn">√ó</button>
        </div>
        <div class="add-btn-container">
          <button class="add-btn">+</button>
        </div>
        <div class="time-display"></div>
      </div>
      <div class="timezone-card">
        <div class="controls">
          <input type="text" class="search-input" placeholder="Search timezone..." />
          <div class="timezone-options"></div>
          <button class="clear-btn">√ó</button>
        </div>
        <div class="add-btn-container">
          <button class="add-btn">+</button>
        </div>
        <div class="time-display"></div>
      </div>
      <div class="timezone-card">
        <div class="controls">
          <input type="text" class="search-input" placeholder="Search timezone..." />
          <div class="timezone-options"></div>
          <button class="clear-btn">√ó</button>
        </div>
        <div class="add-btn-container">
          <button class="add-btn">+</button>
        </div>
        <div class="time-display"></div>
      </div>
    </div>
  </div>
  <script>
    const dt = document.getElementById("dt");
    const format = document.getElementById("format");
    const generateBtn = document.getElementById("generate");
    const code = document.getElementById("code");
    const preview = document.getElementById("preview");
    const copyBtn = document.getElementById("copy");
    const cardCountSelect = document.getElementById("card-count");
    const year = document.getElementById("year");
    const month = document.getElementById("month");
    const day = document.getElementById("day");
    const hour = document.getElementById("hour");
    const minute = document.getElementById("minute");
    const ampmEl = document.getElementById("ampm");
    const panels = document.querySelectorAll(".panel");
    const tabs = document.querySelectorAll(".tab-btn");
    const timezoneCards = document.querySelectorAll(".timezone-card");
    const timezonePanel = document.getElementById("timezone-panel");
    const timezoneHeader = document.getElementById("timezone-header");
    const now = new Date("2025-09-01T17:25:00+05:30"); // Set to 05:25 PM IST, September 01, 2025
    const timezones = Intl.supportedValuesOf('timeZone');

    function toggleTimezoneSection() {
      const count = parseInt(cardCountSelect.value);
      const isEnabled = count > 0;
      timezonePanel.style.display = isEnabled ? 'grid' : 'none';
      localStorage.setItem('timezone-card-count', count);
      if (isEnabled) {
        timezoneCards.forEach((card, index) => {
          card.style.display = index < count ? 'flex' : 'none';
        });
        timezoneCards.forEach(card => {
          const searchInput = card.querySelector('.search-input');
          if (searchInput.value) {
            updateTimezoneTime(card);
          }
        });
      }
      generateTimestamp();
    }

    cardCountSelect.addEventListener("change", toggleTimezoneSection);

    timezoneCards.forEach((card, index) => {
      const addBtn = card.querySelector('.add-btn');
      const searchInput = card.querySelector('.search-input');
      const timezoneOptions = card.querySelector('.timezone-options');
      const timeDisplay = card.querySelector('.time-display');
      const clearBtn = card.querySelector('.clear-btn');
      searchInput.style.display = 'none';
      timezoneOptions.classList.remove('show');

      // Simple mapping of common city names to IANA timezones
      const cityToTimezoneMap = {
        "new york": "America/New_York",
        "los angeles": "America/Los_Angeles",
        "chicago": "America/Chicago",
        "london": "Europe/London",
        "tokyo": "Asia/Tokyo",
        "sydney": "Australia/Sydney",
        "paris": "Europe/Paris"
      };

      function updateTimezoneOptions(searchTerm = '') {
        timezoneOptions.innerHTML = '';
        let filteredTimezones = timezones.filter(tz => 
          tz.toLowerCase().includes(searchTerm.toLowerCase())
        );

        // Check if the search term matches a city name
        const normalizedSearch = searchTerm.toLowerCase().trim();
        if (cityToTimezoneMap[normalizedSearch]) {
          filteredTimezones.unshift(cityToTimezoneMap[normalizedSearch]);
        }

        filteredTimezones.forEach(tz => {
          const option = document.createElement('div');
          option.className = 'timezone-option';
          option.textContent = tz;
          option.addEventListener('click', () => {
            searchInput.value = tz;
            timezoneOptions.classList.remove('show');
            addTimezone(tz);
          });
          timezoneOptions.appendChild(option);
        });
        if (searchInput.style.display !== 'none' && filteredTimezones.length > 0) {
          timezoneOptions.classList.add('show');
        } else {
          timezoneOptions.classList.remove('show');
        }
      }

      addBtn.addEventListener('click', () => {
        if (searchInput.style.display === 'none' && !timezoneOptions.classList.contains('show')) {
          addBtn.style.display = 'none';
          searchInput.style.display = 'block';
          searchInput.focus();
          updateTimezoneOptions('');
        }
      });

      searchInput.addEventListener('input', () => {
        updateTimezoneOptions(searchInput.value);
      });

      document.addEventListener('click', (e) => {
        if (!card.contains(e.target) && e.target !== addBtn && !timezoneOptions.contains(e.target)) {
          timezoneOptions.classList.remove('show');
          if (!searchInput.value.trim()) {
            searchInput.style.display = 'none';
            addBtn.style.display = 'block';
            timeDisplay.innerHTML = '';
            clearBtn.style.display = 'none';
            localStorage.removeItem(`timezone-${index}`);
            generateTimestamp();
          }
        }
      });

      function addTimezone(tz) {
        searchInput.value = tz;
        timezoneOptions.classList.remove('show');
        searchInput.style.display = 'block';
        clearBtn.style.display = 'block';
        addBtn.style.display = 'none';
        localStorage.setItem(`timezone-${index}`, tz);
        updateTimezoneTime(card);
        generateTimestamp();
      }

      clearBtn.addEventListener('click', () => {
        searchInput.value = '';
        timeDisplay.innerHTML = '';
        clearBtn.style.display = 'none';
        addBtn.style.display = 'block';
        searchInput.style.display = 'none';
        timezoneOptions.classList.remove('show');
        localStorage.removeItem(`timezone-${index}`);
        generateTimestamp();
      });

      searchInput.addEventListener('blur', () => {
        setTimeout(() => {
          if (!searchInput.value.trim() && !timezoneOptions.contains(document.activeElement)) {
            timeDisplay.innerHTML = '';
            clearBtn.style.display = 'none';
            addBtn.style.display = 'block';
            searchInput.style.display = 'none';
            timezoneOptions.classList.remove('show');
            localStorage.removeItem(`timezone-${index}`);
            generateTimestamp();
          }
        }, 100);
      });

      const savedTimezone = localStorage.getItem(`timezone-${index}`);
      if (savedTimezone) {
        searchInput.value = savedTimezone;
        timeDisplay.innerHTML = `<span>${savedTimezone}</span>`;
        clearBtn.style.display = 'block';
        addBtn.style.display = 'none';
        searchInput.style.display = 'block';
        updateTimezoneTime(card);
      }
    });

    for (let y = 2025; y <= 3000; y++) {
      year.innerHTML += `<option value="${y}">${y}</option>`;
    }
    const monthNames = [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];
    for (let m = 0; m < 12; m++) {
      month.innerHTML += `<option value="${m + 1}">${monthNames[m]}</option>`;
    }

    function updateDays() {
      const y = parseInt(year.value);
      const m = parseInt(month.value);
      const daysInMonth = new Date(y, m, 0).getDate();
      day.innerHTML = "";
      for (let d = 1; d <= daysInMonth; d++) {
        const val = d.toString().padStart(2, "0");
        day.innerHTML += `<option value="${d}">${val}/${new Date(y, m - 1, d).toLocaleDateString('en-US', { weekday: 'long' })}</option>`;
      }
    }

    function populateDays(yearVal, monthVal) {
      day.innerHTML = "";
      const numDays = new Date(yearVal, monthVal, 0).getDate();
      for (let d = 1; d <= numDays; d++) {
        const dateObj = new Date(yearVal, monthVal - 1, d);
        const weekday = dateObj.toLocaleDateString('en-US', { weekday: 'short' });
        day.innerHTML += `<option value="${d}">${d} / ${weekday}</option>`;
      }
    }

    for (let h = 1; h <= 12; h++) {
      hour.innerHTML += `<option value="${h}">${h.toString().padStart(2, "0")}</option>`;
    }
    for (let m = 0; m <= 59; m++) {
      minute.innerHTML += `<option value="${m}">${m.toString().padStart(2, "0")}</option>`;
    }

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("active"));
        panels.forEach(p => p.classList.remove("active"));
        tab.classList.add("active");
        document.getElementById(tab.dataset.tab).classList.add("active");
        generateTimestamp();
      });
    });

    function updateTimezoneTime(card) {
      const searchInput = card.querySelector('.search-input');
      const timeDisplay = card.querySelector('.time-display');
      const timezone = searchInput.value;

      let selectedDate;
      if (document.getElementById("native").classList.contains("active")) {
        const value = dt.value;
        if (!value) {
          timeDisplay.innerHTML = '';
          return;
        }
        selectedDate = new Date(value);
      } else {
        let y = year.value;
        let m = month.value - 1;
        let d = day.value;
        let h = parseInt(hour.value);
        const min = minute.value;
        const ampm = ampmEl.value;

        if (ampm === "PM" && h < 12) h += 12;
        if (ampm === "AM" && h === 12) h = 0;

        selectedDate = new Date(y, m, d, h, min);
      }

      const dateFormatter = new Intl.DateTimeFormat(navigator.language || 'en', {
        timeZone: timezone,
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: 'numeric',
        minute: '2-digit',
        hour12: true
      });

      const formattedDate = dateFormatter.format(selectedDate);

      const svg = `
        <svg viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="45" stroke="#cfc" stroke-width="2" fill="none"/>
          ${Array.from({ length: 12 }, (_, i) => `
            <line x1="50" y1="10" x2="50" y2="15" transform="rotate(${i * 30} 50 50)" stroke="#cfc" stroke-width="1"/>
          `).join('')}
          <line x1="50" y1="50" x2="50" y2="25" stroke="#cfc" stroke-width="3" transform="rotate(${((selectedDate.getUTCHours() + selectedDate.getUTCMinutes() / 60) * 30)} 50 50)"/>
          <line x1="50" y1="50" x2="50" y2="20" stroke="#cfc" stroke-width="2" transform="rotate(${((selectedDate.getUTCMinutes() + selectedDate.getUTCSeconds() / 60) * 6)} 50 50)"/>
        </svg>
      `;
      timeDisplay.innerHTML = `<span>${timezone}</span><span>${formattedDate}</span><div class="clock">${svg}</div>`;
    }

    function getPreviewString(date, formatType) {
      if (formatType === 'R') {
        const seconds = Math.floor((date - Date.now()) / 1000);
        const abs = Math.abs(seconds);
        const formatter = new Intl.RelativeTimeFormat(navigator.language || 'en', { numeric: 'auto' });

        if (abs >= 31536000) return formatter.format(Math.round(seconds / 31536000), 'year');
        if (abs >= 2592000) return formatter.format(Math.round(seconds / 2592000), 'month');
        if (abs >= 86400) return formatter.format(Math.round(seconds / 86400), 'day');
        if (abs >= 3600) return formatter.format(Math.round(seconds / 3600), 'hour');
        if (abs >= 60) return formatter.format(Math.round(seconds / 60), 'minute');
        return formatter.format(seconds, 'second');
      } else {
        const formatter = new Intl.DateTimeFormat(navigator.language || 'en', {
          ...(formatType.includes('d') ? { dateStyle: 'short' } : {}),
          ...(formatType.includes('D') ? { dateStyle: 'long' } : {}),
          ...(formatType.includes('f') ? { timeStyle: 'short', dateStyle: 'long' } : {}),
          ...(formatType.includes('F') ? { timeStyle: 'short', dateStyle: 'full' } : {}),
          ...(formatType === 't' ? { timeStyle: 'short' } : {}),
          ...(formatType === 'T' ? { timeStyle: 'medium' } : {}),
        });
        return formatter.format(date);
      }
    }

    function generateTimestamp() {
      let selectedDate;
      if (document.getElementById("native").classList.contains("active")) {
        const value = dt.value;
        if (!value) return;
        selectedDate = new Date(value);
      } else {
        let y = year.value;
        let m = month.value - 1;
        let d = day.value;
        let h = parseInt(hour.value);
        const min = minute.value;
        const ampm = ampmEl.value;

        if (ampm === "PM" && h < 12) h += 12;
        if (ampm === "AM" && h === 12) h = 0;

        selectedDate = new Date(y, m, d, h, min);
      }

      const timestamp = Math.floor(selectedDate.getTime() / 1000);
      const formatType = format.value;
      code.textContent = `<t:${timestamp}:${formatType}>`;
      preview.textContent = getPreviewString(selectedDate, formatType);

      const count = parseInt(cardCountSelect.value);
      if (count > 0) {
        timezoneCards.forEach(card => {
          const searchInput = card.querySelector('.search-input');
          if (searchInput.value) {
            updateTimezoneTime(card);
          }
        });
      }
    }

    window.addEventListener("load", () => {
      populateDays(now.getFullYear(), now.getMonth() + 1);
      document.querySelector(".tab-btn[data-tab='native']").classList.remove("active");
      document.getElementById("native").classList.remove("active");
      document.querySelector(".tab-btn[data-tab='custom']").classList.add("active");
      document.getElementById("custom").classList.add("active");
      year.value = now.getFullYear();
      month.value = now.getMonth() + 1;
      day.value = now.getDate();
      let hours = now.getHours();
      ampmEl.value = hours >= 12 ? "PM" : "AM";
      hour.value = ((hours + 11) % 12 + 1);
      minute.value = now.getMinutes();
      const savedCardCount = localStorage.getItem('timezone-card-count') || "2";
      cardCountSelect.value = savedCardCount;
      toggleTimezoneSection();
      generateTimestamp();
    });

    [dt, year, month, day, hour, minute, ampmEl, format].forEach(el =>
      el.addEventListener("change", generateTimestamp)
    );

    generateBtn.addEventListener("click", generateTimestamp);

    copyBtn.addEventListener("click", () => {
      const text = code.textContent;
      if (!text.startsWith("<t:")) return;
      navigator.clipboard.writeText(text).then(() => {
        alert("‚úÖ Timestamp copied!");
      }).catch(() => {
        alert("‚ö†Ô∏è Failed to copy. Try selecting manually.");
      });
    });
  </script>
</body>

</html>

